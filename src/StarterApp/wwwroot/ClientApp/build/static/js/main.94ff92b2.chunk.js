(this["webpackJsonpms-react-admin"]=this["webpackJsonpms-react-admin"]||[]).push([[0],{416:function(e,t,a){e.exports=a(659)},658:function(e,t,a){},659:function(e,t,a){"use strict";a.r(t);var l=a(3),n=a(18),r=a(0),s=a.n(r),i=a(19),c=a.n(i),o=a(79),u=a(707),m=a(708),d=a(709),b=a(710),E=a(711),p=a(712),g=a(257),h=a(33),S=(a(658),a(43)),O=a(22);const j=({entity:e,onSubmit:t,onCancel:a,requestStatus:n})=>{const i=Object(r.useCallback)(e=>{t(e)},[t]),c=Object(S.a)({initialValues:{...e},validationSchema:O.d().shape({name:O.e().required("Required")}),validateOnMount:!1,validateOnBlur:!0,validateOnChange:!0,onSubmit:i});return s.a.createElement(l.v,{onSubmit:c.handleSubmit},s.a.createElement(l.r,null,s.a.createElement(l.ib,Object.assign({},Object(l.tb)(c,"name"),{label:"Name",placeholder:"Category Name"})),s.a.createElement(l.ib,Object.assign({},Object(l.tb)(c,"thumbnail"),{label:"Thumbnail",placeholder:"Category Thumbnail"}))),s.a.createElement(l.A,{src:c.values.thumbnail,alt:"alt",width:500,center:!0}),s.a.createElement(l.w,{entityId:"id",submitRequest:n,onCancel:a,disableSubmit:!c.isValid}))},y=({items:e,paginationSorting:t,selectable:a,totalResults:n,fetchtStatus:r,deleteStatus:i,onCreate:c,onEdit:o,onDelete:u})=>s.a.createElement(l.M,{id:"category-table",collapseAt:600,sortParams:t.sort,onSort:t.setSort,isLoading:r.isPending&&!r.hasInitialResponse,isUpdating:r.isPending&&r.hasInitialResponse,hasError:r.hasError,hasSelectableItems:!0,onSelectAll:a.selectAllItems,allItemsSelected:a.allItemsSelected},s.a.createElement(l.S,null,s.a.createElement(l.R,{width:80}),s.a.createElement(l.R,{sortField:"name"},"Name"),s.a.createElement(l.R,null)),s.a.createElement(l.O,null,e.map(e=>s.a.createElement(l.U,{key:e.id,onSelected:a.setSelectedItem,rowId:e.id,selected:e._selected},s.a.createElement(l.P,{fullWidthOnMobile:!0,rowOnMobile:1},e.thumbnail&&s.a.createElement(l.A,{src:e.thumbnail,alt:"",width:80,height:80,center:!0})),s.a.createElement(l.P,{promoteToHeaderOnMobile:!0},e.name),s.a.createElement(l.V,null,s.a.createElement(l.db,{id:"action-b1",size:"small",onClick:()=>o(e)},"Edit"))))),s.a.createElement(l.Q,null,s.a.createElement(l.T,{onPageChange:t.setPage,page:t.page,rowsPerPage:t.rowsPerPage,totalResults:n,onRowsPerPageChange:t.setRowsPerPage,rowsPerPageOptions:[5,10,20],showRowsPerPageSelect:!0}),s.a.createElement(l.N,null,s.a.createElement(l.C,{id:"deleteAction",variant:"outlined",color:"secondary",requestStatus:i,onClick:u},"Delete"),s.a.createElement(l.K,{id:"primaryAction",onClick:c},"New Entry")))),C=()=>{const[e,t,a]=Object(n.useBooleanState)(!1),[i,c]=Object(r.useState)(),o=Object(l.ub)({defaultSortField:"name",defaultSortDirection:"asc"}),[u,m,d,{totalResults:b}]=Object(n.useCrudOperations)("/api/categories","channel",{onCreateSuccess:()=>{a(),p()},onUpdateSuccess:()=>{a(),p()},onDeleteSuccess:()=>p()}),E=Object(n.useSelectableItems)(u),p=Object(r.useCallback)(()=>{m.read(""+o.paginationSortingQuery)},[o.paginationSortingQuery,m.read]);Object(r.useEffect)(()=>{p()},[o.paginationSortingQuery]);const g=Object(r.useCallback)(()=>{c({id:"",name:"",thumbnail:""}),t()},[]),h=Object(r.useCallback)(e=>{c(e),t()},[]),S=Object(r.useCallback)(e=>{m.update(e),a()},[m]),O=Object(r.useCallback)(()=>{E.selectedIds.forEach(e=>{m.deleteId(e)})},[E,m]);return s.a.createElement(l.E,null,s.a.createElement(l.F,null,s.a.createElement(l.G,{collapseAt:600},s.a.createElement(l.H,null,"Categories"))),s.a.createElement(l.J,null,s.a.createElement(y,{items:E.selectableItems,paginationSorting:o,selectable:E,totalResults:b,fetchtStatus:d.read,deleteStatus:d.delete,onCreate:g,onEdit:h,onDelete:O}),s.a.createElement(l.D,{onCancel:a,open:e,title:"Form",width:700},s.a.createElement(j,{entity:i,onCancel:a,onSubmit:S,requestStatus:d.update}))))},k=({id:e,title:t,titleSubHeading:a,countLabel:n,lastDate:r,count:i,color:c,requestStatus:o})=>s.a.createElement(l.jb,{leftBorder:c},s.a.createElement(l.j,{isLoading:o.isPending,hasError:o.hasError,errorMessage:"Data not found!"},s.a.createElement(l.lb,null,s.a.createElement(l.ob,{color:c},t)),s.a.createElement(l.nb,{color:c,marginTop:0,size:19},a),s.a.createElement(l.kb,{count:i,color:c,label:n,labelColor:c}),s.a.createElement(l.mb,null,s.a.createElement(l.m,{date:r})))),R=()=>{const[e,t,a]=Object(n.useApiRequest)(),i=Object(r.useMemo)(()=>e[0]||{},[e]),[c,o,u]=Object(n.useApiRequest)(),[m,d]=Object(n.useApiRequest)();return Object(r.useEffect)(()=>{t.makeRequest("GET","/api/dashboard/category-vs-last-week"),o.makeRequest("GET","/api/dashboard/least-product-vs-last-week-tile"),d.makeRequest("GET","/api/dashboard/top-quantity-products")},[]),s.a.createElement(l.x,{rows:1,rowHeight:180,breakpoints:[{minWidth:960,columns:2,rows:1,rowHeight:180,gridGap:20},{minWidth:1280,columns:3}]},s.a.createElement(l.y,null,s.a.createElement(k,{id:i.id,title:"Top Category",titleSubHeading:i.name,requestStatus:a,count:i.count,countLabel:i.count-i.countLastWeek>0?`+${i.count-i.countLastWeek} this week`:i.count-i.countLastWeek<0?i.count-i.countLastWeek+" this week":"No changes this week",lastDate:i.lastActionDate,color:i.count>10?"KermitGreen":i.count>4?"PepOrange":0===i.count?"ElmoRed":"UncleDeadlyGrey"})),s.a.createElement(l.y,null,s.a.createElement(k,{id:c.id,title:"Least Product",titleSubHeading:c.name,requestStatus:u,count:c.count,countLabel:c.count-c.countLastWeek>0?`+${c.count-c.countLastWeek} this week`:c.count-c.countLastWeek<0?c.count-c.countLastWeek+" this week":"No changes this week",lastDate:c.lastActionDate,color:c.count>10?"KermitGreen":c.count>4?"PepOrange":c.count>0?"ElmoRed":"UncleDeadlyGrey"})),s.a.createElement(l.y,null,s.a.createElement(l.t,{justifyContent:"center"},s.a.createElement(l.u,null,m.items&&s.a.createElement(l.p,{data:m.items,dataKey:"qty",tooltip:e=>s.a.createElement(l.i,null,s.a.createElement(l.sb,{size:10,color:"StalerWhite"},e.name),s.a.createElement(l.sb,{size:10,color:"StalerWhite"},Math.round(100*e.qty/m.totalQty),"%"))},s.a.createElement(l.sb,{color:"BeakerPink",size:44,weight:700},m.totalQty),s.a.createElement(l.sb,{color:"BeakerPink",size:10,weight:700},"PRODUCTS"))))))},f=()=>{const e=Object(h.f)(),[t,a,i]=Object(n.useApiRequest)(),[c,o,u]=Object(n.useApiRequest)();return Object(r.useEffect)(()=>{a.makeRequest("GET","/api/dashboard/recent-issuings"),o.makeRequest("GET","/api/dashboard/recent-supplyings")},[]),s.a.createElement(l.x,{rows:2,columns:1,rowHeight:400,breakpoints:[{minWidth:1280,columns:2,rows:1,gridGap:20,rowHeight:400}]},s.a.createElement(l.y,null,s.a.createElement(l.jb,null,s.a.createElement(l.lb,null,s.a.createElement(l.ob,null,"Recent Supplyings")),s.a.createElement(l.j,{isLoading:u.isPending,hasError:u.hasError,errorMessage:"Data not found!"},s.a.createElement(l.W,{bottom:10},s.a.createElement(l.Z,null,null===c||void 0===c?void 0:c.map(t=>s.a.createElement(l.bb,{key:t.id,id:t.id,onClick:()=>e.push("/supplies/"+t.id)},s.a.createElement(l.ab,null,t.notes||"Notes not provided."),s.a.createElement(l.ab,{width:100},"Total Qty: "+t.totalQty),s.a.createElement(l.ab,{width:100},s.a.createElement(l.l,{date:t.date.toString()}))))))))),s.a.createElement(l.y,null,s.a.createElement(l.jb,null,s.a.createElement(l.lb,null,s.a.createElement(l.ob,null,"Recent Issuings")),s.a.createElement(l.j,{isLoading:i.isPending,hasError:i.hasError,errorMessage:"Data not found!"},s.a.createElement(l.W,{bottom:10},s.a.createElement(l.Z,null,null===t||void 0===t?void 0:t.map(t=>s.a.createElement(l.bb,{key:t.id,id:t.id,onClick:()=>e.push("/issues/"+t.id)},s.a.createElement(l.ab,null,t.notes||"Notes not provided."),s.a.createElement(l.ab,{width:100},"Total Qty: "+t.totalQty),s.a.createElement(l.ab,{width:100},s.a.createElement(l.l,{date:t.date.toString()}))))))))))},P=()=>{const[,e]=Object(n.useApiRequest)();return Object(r.useEffect)(()=>{e.makeRequest("POST","/api/dashboard/log?dateInfo="+(new Date).toString())},[]),s.a.createElement(l.E,null,s.a.createElement(l.F,null,s.a.createElement(l.G,{collapseAt:600},s.a.createElement(l.H,null,"Dashboard"))),s.a.createElement(l.J,null,s.a.createElement(R,null)),s.a.createElement(l.J,null,s.a.createElement(f,null)))},D=()=>{const[e,t]=Object(r.useState)([{id:63,date:"2021-07-11T14:18:51.89",notes:"Lorem Ipsum is simply dummy text of the printing and typesetting #1",totalQty:1},{id:62,date:"2021-07-11T14:17:45.691",notes:"Lorem Ipsum is simply dummy text of the printing and typesetting #2",totalQty:1},{id:61,date:"2021-07-11T14:07:00",notes:"Lorem Ipsum is simply dummy text of the printing and typesetting #3",totalQty:1},{id:56,date:"2021-07-11T13:47:36.779",notes:"Lorem Ipsum is simply dummy text of the printing and typesetting #4",totalQty:12},{id:54,date:"2021-07-11T13:44:57.248",notes:"Lorem Ipsum is simply dummy text of the printing and typesetting #5",totalQty:5}]),a=e=>console.log(e);return s.a.createElement(l.jb,{minHeight:450},s.a.createElement(l.lb,null,s.a.createElement(l.ob,null,"Draggable Objects")),s.a.createElement(l.W,{bottom:0},s.a.createElement(l.Z,null,s.a.createElement(l.q,{id:"MyDraggableList",onOrderChange:t,items:e,renderItem:e=>s.a.createElement(l.bb,{key:e.id,id:e.id,onClick:a},s.a.createElement(l.ab,null,e.notes||"Notes not provided."))}))))};var w=a(706);const q=["Mr","Mrs","Miss","Dr","Ms","Prof","Rev","Lady","Sir","Mx","Misc","Ind","Mir"].map(e=>({value:e,label:e})),v=()=>{const{requestStatus:e,handleSubmit:t}=function(e=!0){const[t,a]=Object(r.useState)({isPending:!1,hasError:!1});return{requestStatus:t,handleSubmit:t=>{a({isPending:!0,hasError:!1}),setTimeout(()=>{a({isPending:!1,hasError:!e})},1500),console.log(t)}}}(!0),a=Object(S.a)({initialValues:{title:"",firstName:"",lastName:"",email:"",hasConsent:!1,date:"",time:"",radio:""},validationSchema:O.d().shape({title:O.e().required("Required"),firstName:O.e().required("Required"),lastName:O.e().required("Required"),email:O.e().required("Required").email("Invalid email"),radio:O.e().required("Required"),date:O.e().required("Required"),time:O.e().required("Required")}),onSubmit:t});return s.a.createElement(l.jb,{height:500},s.a.createElement(l.lb,null,s.a.createElement(l.ob,null,"Forms")),s.a.createElement(l.W,{bottom:10},s.a.createElement(l.v,{onSubmit:a.handleSubmit},s.a.createElement(l.r,null,s.a.createElement(l.eb,Object.assign({},Object(l.tb)(a,"title"),{data:q,dataValue:"value",dataLabel:"label",sortAlphabetically:!1,label:"Title",placeholder:"Title",marginTop:0,marginBottom:0})),s.a.createElement(l.ib,Object.assign({},Object(l.tb)(a,"firstName"),{label:"First Name",placeholder:"Patient's first name",marginTop:0,marginBottom:0})),s.a.createElement(l.ib,Object.assign({},Object(l.tb)(a,"lastName"),{label:"Surname",placeholder:"Patient's surname",marginTop:0,marginBottom:0}))),s.a.createElement(l.ib,Object.assign({},Object(l.tb)(a,"email"),{label:"Email",placeholder:"Enter your email address",iconLeft:s.a.createElement(w.a,{htmlColor:"#6a6a6a"})})),s.a.createElement(l.hb,Object.assign({},Object(l.tb)(a,"notes"),{label:"Item Notes"})),s.a.createElement(l.t,null,s.a.createElement(l.u,{grow:1},s.a.createElement(l.n,Object.assign({},Object(l.tb)(a,"date"),{label:"Date Field",marginTop:0,marginBottom:0}))),s.a.createElement(l.u,{width:110,marginLeft:10},s.a.createElement(l.pb,Object.assign({},Object(l.tb)(a,"time"),{label:"Time Field",marginTop:0,marginBottom:0})))),s.a.createElement(l.rb,Object.assign({},Object(l.tb)(a,"hasConsent"),{label:"Consent to something"})),s.a.createElement(l.L,Object.assign({},Object(l.tb)(a,"radio"),{label:"Some Radio Buttons",values:[{value:"yes",label:"Yes"},{value:"no",label:"No"}]})),s.a.createElement(l.w,{entityId:"id",submitRequest:e,onCancel:()=>{},disableSubmit:!a.isValid})))," ")},I=()=>{const[e,t]=Object(r.useState)("item1");return s.a.createElement(l.jb,{height:500},s.a.createElement(l.lb,null,s.a.createElement(l.ob,null,"Tabs")),s.a.createElement(l.gb,{value:e,onChange:t},s.a.createElement(l.fb,{value:"item1"},"Item 1"),s.a.createElement(l.fb,{value:"item2"},"Item 2")),"item1"===e&&s.a.createElement(l.jb,{height:100,marginBottom:10},s.a.createElement(l.lb,null,s.a.createElement(l.ob,null,"First Tab"))),"item2"===e&&s.a.createElement(l.jb,{height:100,marginBottom:10},s.a.createElement(l.lb,null,s.a.createElement(l.ob,null,"Second Tab"))),s.a.createElement(l.lb,null,s.a.createElement(l.ob,null,"Alerts")),s.a.createElement(l.a,{marginBottom:5,type:"Error"},"Error Alert"),s.a.createElement(l.a,{marginBottom:5,type:"Warning"},"Warning Alert"),s.a.createElement(l.a,{marginBottom:5,type:"Info"},"Info Alert"),s.a.createElement(l.a,{marginBottom:5,type:"Success"},"Success Alert"))},T=()=>s.a.createElement(l.E,null,s.a.createElement(l.F,null,s.a.createElement(l.G,{collapseAt:600},s.a.createElement(l.H,null,"Example Controls"))),s.a.createElement(l.J,null,s.a.createElement(l.x,{columns:4},s.a.createElement(l.y,{col:1,colSpan:4,row:1,breakpoints:[{minWidth:1400,col:1,colSpan:3,row:1}]},s.a.createElement(l.jb,null,s.a.createElement(l.B,null))),s.a.createElement(l.y,{col:1,colSpan:4,row:2,breakpoints:[{minWidth:1400,col:4,row:1}]},s.a.createElement(D,null)),s.a.createElement(l.y,{col:1,colSpan:4,row:4,breakpoints:[{minWidth:1400,col:1,colSpan:2,row:2},{minWidth:1100,col:1,colSpan:2,row:3}]},s.a.createElement(I,null)),s.a.createElement(l.y,{col:1,colSpan:4,row:5,breakpoints:[{minWidth:1400,col:3,colSpan:2,row:2},{minWidth:1100,col:3,colSpan:2,row:3}]},s.a.createElement(v,null))))),A=[{type:"date-range",label:"Issue Date",name:"issueDateRange"}],N=({items:e,paginationSorting:t,selectable:a,totalResults:n,fetchtStatus:r,deleteStatus:i,onCreate:c,onEdit:o,onDelete:u})=>s.a.createElement(l.M,{id:"issue-table",collapseAt:600,sortParams:t.sort,onSort:t.setSort,isLoading:r.isPending&&!r.hasInitialResponse,isUpdating:r.isPending&&r.hasInitialResponse,hasError:r.hasError,hasSelectableItems:!0,onSelectAll:a.selectAllItems,allItemsSelected:a.allItemsSelected},s.a.createElement(l.S,null,s.a.createElement(l.R,{sortField:"transactionNumber"},"#"),s.a.createElement(l.R,{sortField:"issueDate"},"Issue Date"),s.a.createElement(l.R,{width:"60%",sortField:"notes"},"Notes"),s.a.createElement(l.R,null)),s.a.createElement(l.O,null,e.map(e=>s.a.createElement(l.U,{key:e.id,onSelected:a.setSelectedItem,rowId:e.id,selected:e._selected},s.a.createElement(l.P,null,e.transactionNumber),s.a.createElement(l.P,{promoteToHeaderOnMobile:!0},s.a.createElement(l.l,{date:e.issueDate.toString()})),s.a.createElement(l.P,null,e.notes),s.a.createElement(l.V,null,s.a.createElement(l.db,{id:"Edit",size:"small",onClick:()=>o(e)},"Edit"))))),s.a.createElement(l.Q,null,s.a.createElement(l.T,{onPageChange:t.setPage,page:t.page,rowsPerPage:t.rowsPerPage,totalResults:n,onRowsPerPageChange:t.setRowsPerPage,rowsPerPageOptions:[5,10,20],showRowsPerPageSelect:!0}),s.a.createElement(l.N,null,s.a.createElement(l.C,{id:"deleteAction",variant:"outlined",color:"secondary",requestStatus:i,onClick:u},"Delete"),s.a.createElement(l.K,{id:"primaryAction",onClick:c},"New Entry")))),B=()=>{const e=Object(h.f)(),t=Object(l.ub)({defaultSortField:"issueDate",defaultSortDirection:"desc"}),[a,{makeRequest:i},c,{totalResults:o}]=Object(n.useApiRequest)(),[,u,m]=Object(n.useApiRequest)({onSuccess:()=>p()}),d=Object(n.useSelectableItems)(a),[b,E]=Object(r.useState)({issueDateRange:{from:"",to:""},searchText:""}),p=Object(r.useCallback)(()=>{i("POST","/api/issues/get",{page:t.page,pageSize:t.rowsPerPage,orderBy:t.sort.field,sortDirection:t.sort.direction,filter:{searchText:b.searchText,issueDateTo:b.issueDateRange.to,issueDateFrom:b.issueDateRange.from}})},[t.paginationSortingQuery,b,i]);Object(r.useEffect)(()=>{p()},[t.paginationSortingQuery,b]);const g=Object(r.useCallback)(e=>{E({...b,searchText:e}),t.setPage(0)},[b]),S=Object(r.useCallback)(()=>{e.push("issues/new")},[]),O=Object(r.useCallback)(t=>{e.push("issues/"+t.id)},[]),j=Object(r.useCallback)(()=>{d.selectedIds.forEach(e=>{u.makeRequest("DELETE","/api/issues/"+e)})},[d,u.makeRequest]);return s.a.createElement(l.E,null,s.a.createElement(l.F,null,s.a.createElement(l.G,{collapseAt:600},s.a.createElement(l.H,null,"Issues"))),s.a.createElement(l.J,null,s.a.createElement(l.X,{search:s.a.createElement(l.Y,{name:"search-field",placeholder:"Search",onSearch:g}),filters:s.a.createElement(l.s,{config:A,values:b,onChange:E})}),s.a.createElement(l.cb,{filtersConfig:A,filterValues:b,onFiltersChange:E,searchTerm:b.searchText,onSearchChange:g}),s.a.createElement(N,{items:d.selectableItems,paginationSorting:t,selectable:d,totalResults:o,fetchtStatus:c,deleteStatus:m,onCreate:S,onEdit:O,onDelete:j})))};function L(e,t,a,l,n){const s=Object(r.useCallback)(e=>{l({...e})},[]),i=Object(r.useCallback)(e=>{l(e)},[]),c=Object(r.useCallback)(l=>{e&&(void 0!==l.index?a[l.index]={...l}:t({...e,[n]:[...a.filter(e=>e.index!==l.index),{...l}].map((e,t)=>({...e,index:t}))}))},[e,a,t,n]);return{onCreateDetail:s,onEditDetail:i,onDeleteDetail:Object(r.useCallback)(l=>{if(e){const r=a.slice();r.splice(l,1),t({...e,[n]:r})}},[e,a,t]),onConfirmDetail:c}}const M=({entity:e,onSubmit:t,onCancel:a,productLookup:n})=>{const i=Object(r.useCallback)(e=>{var a;const l=null===(a=n.find(t=>t.id===e.productId))||void 0===a?void 0:a.name;t({...e,productName:l})},[t]),c=Object(S.a)({initialValues:{...e},validationSchema:O.d().shape({productId:O.c().required("Required"),quantity:O.c().required("Required").positive("Must be positive value")}),validateOnMount:!1,validateOnBlur:!0,validateOnChange:!0,onSubmit:i});return s.a.createElement(l.v,{onSubmit:c.handleSubmit},s.a.createElement(l.r,null,s.a.createElement(l.eb,Object.assign({},Object(l.tb)(c,"productId"),{data:n,dataValue:"id",dataLabel:"name",sortAlphabetically:!0,label:"Product",marginTop:0,marginBottom:0})),s.a.createElement(l.ib,Object.assign({},Object(l.tb)(c,"quantity"),{type:"number",label:"Quantity",marginTop:0,marginBottom:0}))),s.a.createElement(l.w,{entityId:"id",submitRequest:void 0,onCancel:a,disableSubmit:!c.isValid}))},F=({items:e,onCreate:t,onEdit:a,onDelete:n})=>s.a.createElement(l.M,{id:"issue-details-table",collapseAt:600},s.a.createElement(l.S,null,s.a.createElement(l.R,{sortField:"productName"},"Product Name"),s.a.createElement(l.R,{width:400,sortField:"quantity"},"Qty"),s.a.createElement(l.R,null)),s.a.createElement(l.O,null,null===e||void 0===e?void 0:e.map((e,t)=>s.a.createElement(l.U,{key:t},s.a.createElement(l.P,null,e.productName),s.a.createElement(l.P,null,e.quantity),s.a.createElement(l.V,null,s.a.createElement(l.db,{id:"Edit-"+t,size:"small",onClick:()=>a(e)},"Edit"),s.a.createElement(l.db,{color:"secondary",id:"Delete-"+t,size:"small",onClick:()=>n(t)},"Delete"))))),s.a.createElement(l.Q,{alignRight:!0},s.a.createElement(l.N,null,s.a.createElement(l.K,{id:"primaryAction",onClick:t,type:"button"},"New Entry")))),x=({entity:e,onSubmit:t,onCancel:a,requestStatus:n,children:i})=>{const c=Object(r.useCallback)(e=>{t(e)},[t]);Object(r.useEffect)(()=>{o.setValues({...o.values,issueDetails:null===e||void 0===e?void 0:e.issueDetails})},[e]);const o=Object(S.a)({initialValues:{...e},validationSchema:O.d().shape({issueDate:O.b().required("Required"),transactionNumber:O.c().required("Required"),issueDetails:O.a().min(1,"Must have 1 item")}),validateOnMount:!1,validateOnBlur:!0,validateOnChange:!0,onSubmit:c});return s.a.createElement(l.v,{onSubmit:o.handleSubmit},s.a.createElement(l.jb,{marginBottom:10},s.a.createElement(l.r,{marginTop:0,marginBottom:0},s.a.createElement(l.o,Object.assign({},Object(l.tb)(o,"issueDate"),{label:"Issue Date",showTime:!0,clearable:!0,marginBottom:0})),s.a.createElement(l.ib,Object.assign({},Object(l.tb)(o,"transactionNumber"),{type:"number",label:"Transaction Number",marginBottom:0}))),s.a.createElement(l.hb,Object.assign({},Object(l.tb)(o,"notes"),{label:"Notes"}))),i,s.a.createElement(l.w,{entityId:"id",submitRequest:n,onCancel:a,disableSubmit:!o.isValid}))},Q=()=>{const e=Object(h.f)(),{id:t}=Object(h.h)(),[a,i,c]=Object(n.useBooleanState)(!1),[o,u]=Object(r.useState)(),[m,d]=Object(r.useState)(),[b,E,p]=Object(n.useApiRequest)(),[,{makeRequest:g},S]=Object(n.useApiRequest)({onSuccess:(e,t)=>u({...t,issueDetails:t.issueDetails.map((e,t)=>({...e,index:t}))})}),[,O,j,{totalResults:y}]=Object(n.useCrudOperations)("/api/issues","channel",{onCreateSuccess:()=>e.push("/issues"),onUpdateSuccess:()=>e.push("/issues"),onDeleteSuccess:()=>e.push("/issues")}),C=Object(r.useCallback)(e=>g("GET","/api/issues/"+e),[g]),k=Object(r.useCallback)(()=>{E.makeRequest("GET","/api/products/lookup")},[E.makeRequest]),R=Object(r.useCallback)(e=>{O.update(e)},[O]),f=Object(r.useCallback)(()=>e.push("/issues"),[]),{onCreateDetail:P,onEditDetail:D,onDeleteDetail:w,onConfirmDetail:q}=L(o,u,null===o||void 0===o?void 0:o.issueDetails,d,"issueDetails"),v=Object(r.useCallback)(()=>{P({id:void 0,productId:"",quantity:"",index:void 0}),i()},[P]),I=Object(r.useCallback)(e=>{D(e),i()},[D]),T=Object(r.useCallback)(e=>{q(e),c()},[q]),A=Object(r.useCallback)(e=>{w(e)},[w]);return Object(r.useEffect)(()=>{parseInt(t)>0?C(t):u({id:"",issueDate:new Date,notes:"",transactionNumber:"",issueDetails:[]})},[t]),Object(r.useEffect)(()=>{k()},[]),s.a.createElement(l.E,null,s.a.createElement(l.F,null,s.a.createElement(l.G,{collapseAt:600},s.a.createElement(l.H,null,(null===o||void 0===o?void 0:o.id)?"Issue - #"+o.id:"Issue"))),s.a.createElement(l.J,null,s.a.createElement(l.j,{isLoading:S.isPending||p.isPending,hasError:S.hasError||p.hasError,errorMessage:"Issue or Products not found!",top:100},o&&s.a.createElement(x,{onSubmit:R,onCancel:f,entity:o,requestStatus:j.update},s.a.createElement(F,{items:null===o||void 0===o?void 0:o.issueDetails,totalResults:y,fetchtStatus:j.read,deleteStatus:j.delete,onCreate:v,onEdit:I,onDelete:A}),s.a.createElement(l.D,{onCancel:c,open:a,title:"Form",width:700},s.a.createElement(M,{entity:m,productLookup:b,onCancel:c,onSubmit:T}))))))},W=({entity:e,onSubmit:t,onCancel:a,requestStatus:n,categoryLookup:i})=>{const c=Object(r.useCallback)(e=>{t(e)},[t]),o=Object(S.a)({initialValues:{...e},validationSchema:O.d().shape({name:O.e().required("Required"),thumbnail:O.e().required("Required")}),validateOnMount:!1,validateOnBlur:!0,validateOnChange:!1,onSubmit:c});return s.a.createElement(l.v,{onSubmit:o.handleSubmit},s.a.createElement(l.r,null,s.a.createElement(l.ib,Object.assign({},Object(l.tb)(o,"name"),{label:"Product Name",placeholder:"Enter a name",marginTop:0,marginBottom:0})),s.a.createElement(l.eb,Object.assign({},Object(l.tb)(o,"categoryId"),{data:i,dataValue:"id",dataLabel:"name",sortAlphabetically:!0,label:"Category",marginTop:0,marginBottom:0}))),s.a.createElement(l.hb,Object.assign({},Object(l.tb)(o,"description"),{label:"Description"})),s.a.createElement(l.ib,Object.assign({},Object(l.tb)(o,"thumbnail"),{label:"Thumbnail"})),s.a.createElement(l.A,{src:o.values.thumbnail,alt:"",width:300,center:!0}),s.a.createElement(l.w,{entityId:"id",submitRequest:n,onCancel:a,disableSubmit:!o.isValid}))},V=({items:e,paginationSorting:t,selectable:a,totalResults:n,fetchtStatus:r,deleteStatus:i,onCreate:c,onEdit:o,onDelete:u})=>s.a.createElement(l.M,{id:"products-table",collapseAt:600,sortParams:t.sort,onSort:t.setSort,isLoading:r.isPending&&!r.hasInitialResponse,isUpdating:r.isPending&&r.hasInitialResponse,hasError:r.hasError,hasSelectableItems:!0,onSelectAll:a.selectAllItems,allItemsSelected:a.allItemsSelected},s.a.createElement(l.S,null,s.a.createElement(l.R,{width:80}),s.a.createElement(l.R,{sortField:"name"},"Name"),s.a.createElement(l.R,{sortField:"categoryName"},"Category"),s.a.createElement(l.R,{width:"50%",sortField:"description"},"Description"),s.a.createElement(l.R,{sortField:"quantity"},"Total Qty"),s.a.createElement(l.R,null)),s.a.createElement(l.O,null,e.map(e=>s.a.createElement(l.U,{key:e.id,onSelected:a.setSelectedItem,rowId:e.id,selected:e._selected},s.a.createElement(l.P,{fullWidthOnMobile:!0,rowOnMobile:1},e.thumbnail&&s.a.createElement(l.A,{src:e.thumbnail,alt:"",width:80,height:80,center:!0})),s.a.createElement(l.P,{promoteToHeaderOnMobile:!0},e.name),s.a.createElement(l.P,null,e.categoryName),s.a.createElement(l.P,{fullWidthOnMobile:!0,_isInLastRow:!0},e.description),s.a.createElement(l.P,null,e.quantity),s.a.createElement(l.V,null,s.a.createElement(l.db,{id:"Edit",size:"small",onClick:()=>o(e)},"Edit"))))),s.a.createElement(l.Q,null,s.a.createElement(l.T,{onPageChange:t.setPage,page:t.page,rowsPerPage:t.rowsPerPage,totalResults:n,onRowsPerPageChange:t.setRowsPerPage,rowsPerPageOptions:[5,10,20],showRowsPerPageSelect:!0}),s.a.createElement(l.N,null,s.a.createElement(l.C,{id:"deleteAction",variant:"outlined",color:"secondary",requestStatus:i,onClick:u},"Delete"),s.a.createElement(l.K,{id:"primaryAction",onClick:c},"New Entry")))),G=()=>{const[e,t,a]=Object(n.useBooleanState)(!1),[i,c]=Object(r.useState)(),o=Object(l.ub)({defaultSortField:"name",defaultSortDirection:"asc"}),[u,m,d,{totalResults:b}]=Object(n.useCrudOperations)("/api/products","channel",{onCreateSuccess:()=>{a(),j()},onUpdateSuccess:()=>{a(),j()},onDeleteSuccess:()=>j()}),[E,p]=Object(n.useApiRequest)(),g=Object(r.useCallback)(()=>{p.makeRequest("GET","/api/categories/lookup")},[p.makeRequest]),h=Object(n.useSelectableItems)(u),[S,O]=Object(r.useState)({searchText:""}),j=Object(r.useCallback)(()=>{m.read(`${o.paginationSortingQuery}&filter=${S.searchText}`)},[o.paginationSortingQuery,S,m]);Object(r.useEffect)(()=>{j()},[o.paginationSortingQuery,S]),Object(r.useEffect)(()=>{g()},[]);const y=Object(r.useCallback)(e=>{O({searchText:e}),o.setPage(0)},[S]),C=Object(r.useCallback)(()=>{c({id:"",name:"",description:"",thumbnail:"",categoryId:""}),t()},[]),k=Object(r.useCallback)(e=>{c(e),t()},[]),R=Object(r.useCallback)(e=>{m.update(e)},[m]),f=Object(r.useCallback)(()=>{h.selectedIds.forEach(e=>{m.deleteId(e)})},[h,m]);return s.a.createElement(l.E,null,s.a.createElement(l.F,null,s.a.createElement(l.G,{collapseAt:600},s.a.createElement(l.H,null,"Products"))),s.a.createElement(l.J,null,s.a.createElement(l.t,{marginBottom:10,alignItems:"stretch",direction:"column",breakpoints:[{minWidth:600,direction:"row",alignItems:"center"}]},s.a.createElement(l.u,{width:"100%"},s.a.createElement(l.t,null,s.a.createElement(l.u,{width:"100%",breakpoints:[{minWidth:600,width:400}]},s.a.createElement(l.Y,{name:"search-field",placeholder:"Search",onSearch:y,width:400}))))),s.a.createElement(V,{items:h.selectableItems,paginationSorting:o,selectable:h,totalResults:b,fetchtStatus:d.read,deleteStatus:d.delete,onCreate:C,onEdit:k,onDelete:f}),s.a.createElement(l.D,{onCancel:a,open:e,title:"Form",width:700},s.a.createElement(W,{entity:i,onCancel:a,onSubmit:R,requestStatus:d.update,categoryLookup:E}))))},H=({entity:e,onSubmit:t,onCancel:a,requestStatus:n,children:i})=>{const c=Object(r.useCallback)(e=>{t(e)},[t]);Object(r.useEffect)(()=>{o.setValues({...o.values,supplyDetails:null===e||void 0===e?void 0:e.supplyDetails})},[e]);const o=Object(S.a)({initialValues:{...e},validationSchema:O.d().shape({supplyDate:O.b().required("Required"),transactionNumber:O.c().required("Required"),supplyDetails:O.a().min(1,"Must have 1 item")}),validateOnMount:!1,validateOnBlur:!0,validateOnChange:!0,onSubmit:c});return s.a.createElement(l.v,{onSubmit:o.handleSubmit},s.a.createElement(l.jb,{marginBottom:10},s.a.createElement(l.r,{marginTop:0,marginBottom:0},s.a.createElement(l.o,Object.assign({},Object(l.tb)(o,"supplyDate"),{label:"Supply Date",showTime:!0,clearable:!0,marginBottom:0})),s.a.createElement(l.ib,Object.assign({},Object(l.tb)(o,"transactionNumber"),{type:"number",label:"Transaction Number",marginBottom:0}))),s.a.createElement(l.hb,Object.assign({},Object(l.tb)(o,"notes"),{label:"Notes"}))),i,s.a.createElement(l.w,{entityId:"id",submitRequest:n,onCancel:a,disableSubmit:!o.isValid}))},U=({entity:e,onSubmit:t,onCancel:a,productLookup:n})=>{const i=Object(r.useCallback)(e=>{var a;const l=null===(a=n.find(t=>t.id===e.productId))||void 0===a?void 0:a.name;t({...e,productName:l})},[t]),c=Object(S.a)({initialValues:{...e},validationSchema:O.d().shape({productId:O.c().required("Required"),quantity:O.c().required("Required").positive("Must be positive value")}),validateOnMount:!1,validateOnBlur:!0,validateOnChange:!0,onSubmit:i});return s.a.createElement(l.v,{onSubmit:c.handleSubmit},s.a.createElement(l.r,null,s.a.createElement(l.eb,Object.assign({},Object(l.tb)(c,"productId"),{data:n,dataValue:"id",dataLabel:"name",sortAlphabetically:!0,label:"Product",marginTop:0,marginBottom:0})),s.a.createElement(l.ib,Object.assign({},Object(l.tb)(c,"quantity"),{type:"number",label:"Quantity",marginTop:0,marginBottom:0}))),s.a.createElement(l.w,{entityId:"id",submitRequest:void 0,onCancel:a,disableSubmit:!c.isValid}))},z=({items:e,onCreate:t,onEdit:a,onDelete:n})=>s.a.createElement(l.M,{id:"supply-details-table",collapseAt:600},s.a.createElement(l.S,null,s.a.createElement(l.R,{sortField:"productName"},"Product Name"),s.a.createElement(l.R,{width:400,sortField:"quantity"},"Qty"),s.a.createElement(l.R,null)),s.a.createElement(l.O,null,null===e||void 0===e?void 0:e.map((e,t)=>s.a.createElement(l.U,{key:t},s.a.createElement(l.P,null,e.productName),s.a.createElement(l.P,null,e.quantity),s.a.createElement(l.V,null,s.a.createElement(l.db,{id:"Edit-"+t,size:"small",onClick:()=>a(e)},"Edit"),s.a.createElement(l.db,{color:"secondary",id:"Delete-"+t,size:"small",onClick:()=>n(t)},"Delete"))))),s.a.createElement(l.Q,{alignRight:!0},s.a.createElement(l.N,null,s.a.createElement(l.K,{id:"primaryAction",onClick:t,type:"button"},"New Entry")))),J=()=>{const e=Object(h.f)(),{id:t}=Object(h.h)(),[a,i,c]=Object(n.useBooleanState)(!1),[o,u]=Object(r.useState)(),[m,d]=Object(r.useState)(),[b,E,p]=Object(n.useApiRequest)(),[,{makeRequest:g},S]=Object(n.useApiRequest)({onSuccess:(e,t)=>u({...t,supplyDetails:t.supplyDetails.map((e,t)=>({...e,index:t}))})}),[,O,j,{totalResults:y}]=Object(n.useCrudOperations)("/api/supplies","channel",{onCreateSuccess:()=>e.push("/supplies"),onUpdateSuccess:()=>e.push("/supplies"),onDeleteSuccess:()=>e.push("/supplies")}),C=Object(r.useCallback)(e=>g("GET","/api/supplies/"+e),[g]),k=Object(r.useCallback)(()=>{E.makeRequest("GET","/api/products/lookup")},[E.makeRequest]),R=Object(r.useCallback)(e=>{O.update(e)},[O]),f=Object(r.useCallback)(()=>e.push("/supplies"),[]),{onCreateDetail:P,onEditDetail:D,onDeleteDetail:w,onConfirmDetail:q}=L(o,u,null===o||void 0===o?void 0:o.supplyDetails,d,"supplyDetails"),v=Object(r.useCallback)(()=>{P({id:void 0,productId:"",quantity:"",index:void 0}),i()},[P]),I=Object(r.useCallback)(e=>{D(e),i()},[D]),T=Object(r.useCallback)(e=>{q(e),c()},[q]),A=Object(r.useCallback)(e=>{w(e)},[w]);return Object(r.useEffect)(()=>{parseInt(t)>0?C(t):u({id:"",supplyDate:new Date,notes:"",transactionNumber:"",supplyDetails:[]})},[t]),Object(r.useEffect)(()=>{k()},[]),s.a.createElement(l.E,null,s.a.createElement(l.F,null,s.a.createElement(l.G,{collapseAt:600},s.a.createElement(l.H,null,(null===o||void 0===o?void 0:o.id)?"Supply - #"+o.id:"Supply"))),s.a.createElement(l.J,null,s.a.createElement(l.j,{isLoading:S.isPending||p.isPending,hasError:S.hasError||p.hasError,errorMessage:"Supply or Products not found!",top:100},o&&s.a.createElement(H,{onSubmit:R,onCancel:f,entity:o,requestStatus:j.update},s.a.createElement(z,{items:null===o||void 0===o?void 0:o.supplyDetails,totalResults:y,fetchtStatus:j.read,deleteStatus:j.delete,onCreate:v,onEdit:I,onDelete:A}),s.a.createElement(l.D,{onCancel:c,open:a,title:"Form",width:700},s.a.createElement(U,{entity:m,productLookup:b,onCancel:c,onSubmit:T}))))))},K=({items:e,clickedItemId:t,paginationSorting:a,totalResults:n,fetchtStatus:r,deleteStatus:i,onCreate:c,onEdit:o,onDelete:u})=>s.a.createElement(l.M,{id:"supply-table",collapseAt:600,sortParams:a.sort,onSort:a.setSort,isLoading:r.isPending&&!r.hasInitialResponse,isUpdating:r.isPending&&r.hasInitialResponse,hasError:r.hasError},s.a.createElement(l.S,null,s.a.createElement(l.R,{sortField:"transactionNumber"},"#"),s.a.createElement(l.R,{sortField:"supplyDate"},"Supply Date"),s.a.createElement(l.R,{width:"60%",sortField:"notes"},"Notes"),s.a.createElement(l.R,null)),s.a.createElement(l.O,null,e.map(e=>s.a.createElement(l.U,{key:e.id},s.a.createElement(l.P,null,e.transactionNumber),s.a.createElement(l.P,{promoteToHeaderOnMobile:!0},s.a.createElement(l.l,{date:e.supplyDate.toString()})),s.a.createElement(l.P,null,e.notes),s.a.createElement(l.V,null,s.a.createElement(l.C,{id:"deleteAction-"+e.id,variant:"outlined",color:"secondary",size:"small",requestStatus:e.id===t?i:void 0,onClick:()=>u(e.id)},"Delete"),s.a.createElement(l.db,{id:"Edit",size:"small",onClick:()=>o(e)},"Edit"))))),s.a.createElement(l.Q,null,s.a.createElement(l.T,{onPageChange:a.setPage,page:a.page,rowsPerPage:a.rowsPerPage,totalResults:n,onRowsPerPageChange:a.setRowsPerPage,rowsPerPageOptions:[5,10,20],showRowsPerPageSelect:!0}),s.a.createElement(l.N,null,s.a.createElement(l.K,{id:"primaryAction",onClick:c},"New Entry")))),Y=[{type:"date-range",label:"Supply Date",name:"supplyDateRange"}],$=()=>{const e=Object(h.f)(),[t,a]=Object(r.useState)(),i=Object(l.ub)({defaultSortField:"supplyDate",defaultSortDirection:"desc"}),[c,{makeRequest:o},u,{totalResults:m}]=Object(n.useApiRequest)(),[,d,b]=Object(n.useApiRequest)({onSuccess:()=>g()}),[E,p]=Object(r.useState)({supplyDateRange:{from:"",to:""},searchText:""}),g=Object(r.useCallback)(()=>{o("POST","/api/supplies/get",{page:i.page,pageSize:i.rowsPerPage,orderBy:i.sort.field,sortDirection:i.sort.direction,filter:{searchText:E.searchText,supplyDateTo:E.supplyDateRange.to,supplyDateFrom:E.supplyDateRange.from}})},[i.paginationSortingQuery,E,o]);Object(r.useEffect)(()=>{g()},[i.paginationSortingQuery,E]);const S=Object(r.useCallback)(e=>{p({...E,searchText:e}),i.setPage(0)},[E]),O=Object(r.useCallback)(()=>{e.push("supplies/new")},[]),j=Object(r.useCallback)(t=>{e.push("supplies/"+t.id)},[]),y=Object(r.useCallback)(e=>{a(e),d.makeRequest("DELETE","/api/supplies/"+e)},[d.makeRequest]);return s.a.createElement(l.E,null,s.a.createElement(l.F,null,s.a.createElement(l.G,{collapseAt:600},s.a.createElement(l.H,null,"Supplies"))),s.a.createElement(l.J,null,s.a.createElement(l.X,{search:s.a.createElement(l.Y,{name:"search-field",placeholder:"Search",onSearch:S}),filters:s.a.createElement(l.s,{config:Y,values:E,onChange:p})}),s.a.createElement(l.cb,{filtersConfig:Y,filterValues:E,onFiltersChange:p,searchTerm:E.searchText,onSearchChange:S}),s.a.createElement(K,{items:c,clickedItemId:t,paginationSorting:i,totalResults:m,fetchtStatus:u,deleteStatus:b,onCreate:O,onEdit:j,onDelete:y})))};a(19);var _=()=>{const[e,t]=Object(r.useState)(""),[a,n]=Object(r.useState)("info"),i=(new g.a).withUrl("https://ms-inventory-beta.herokuapp.com/applicationhub").withAutomaticReconnect().build();return Object(r.useEffect)(()=>{i.state===g.b.Disconnected&&i.start(),i.on("WarningMessage",(e,a)=>{n("error"),t(a)})},[i.state]),s.a.createElement(l.g,null,s.a.createElement(l.c,{logo:s.a.createElement("img",{src:"final-logo-example.png",alt:"",height:"100%"}),actions:s.a.createElement(l.k,{name:"User #1",collapseAt:700})}),s.a.createElement(l.d,null,s.a.createElement(l.f,{to:"/",icon:s.a.createElement(u.a,null)},"Home"),s.a.createElement(l.f,{to:"/examples",icon:s.a.createElement(m.a,null)},"Examples"),s.a.createElement(l.e,null),s.a.createElement(l.f,{to:"/categories",icon:s.a.createElement(d.a,null)},"Categories"),s.a.createElement(l.f,{to:"/products",icon:s.a.createElement(b.a,null)},"Products"),s.a.createElement(l.f,{to:"/supplies",icon:s.a.createElement(E.a,null)},"Supplies"),s.a.createElement(l.f,{to:"/issues",icon:s.a.createElement(p.a,null)},"Issues")),s.a.createElement(l.b,null,s.a.createElement(h.c,null,s.a.createElement(h.a,{path:"/categories",component:C}),s.a.createElement(h.a,{path:"/products",component:G}),s.a.createElement(h.a,{path:"/supplies/:id",component:J}),s.a.createElement(h.a,{path:"/supplies",component:$}),s.a.createElement(h.a,{path:"/issues/:id",component:Q}),s.a.createElement(h.a,{path:"/issues",component:B}),s.a.createElement(h.a,{path:"/examples",component:T}),s.a.createElement(h.a,{path:"/",component:P}),s.a.createElement(h.a,{path:"*",exact:!0,component:l.I}))),s.a.createElement(l.qb,{severity:a,message:e,setMessage:t}))};!async function(){c.a.render(s.a.createElement(n.ErrorBoundary,{errorComponent:()=>s.a.createElement(l.h,null)},s.a.createElement(n.HSSInfrastructureProvider,null,s.a.createElement(l.z,{maxContentWidth:1500},s.a.createElement(o.a,null,s.a.createElement(_,null))))),document.getElementById("root"))}()}},[[416,1,2]]]);
//# sourceMappingURL=main.94ff92b2.chunk.js.map